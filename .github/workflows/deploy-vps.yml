# name: Deploy to VPS

# on:
#   workflow_dispatch:
#     inputs:
#       command:
#         description: "Docker command to execute"
#         required: true
#         type: choice
#         options:
#           - docker service update --force --image ghcr.io/${{ github.repository }}:latest pta-bot
#           - docker service ps pta-bot
#           - docker service logs pta-bot --tail 100
#           - docker stack ps pta

# jobs:
#   deploy:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout repo
#         uses: actions/checkout@v4

#       - name: Setup SSH
#         run: |
#           mkdir -p ~/.ssh
#           echo "${{ secrets.VPS_SSH_KEY }}" > ~/.ssh/id_rsa
#           chmod 600 ~/.ssh/id_rsa
#           ssh-keyscan -H ${{ secrets.VPS_HOST }} >> ~/.ssh/known_hosts 2>/dev/null

#       - name: Execute Docker command on VPS
#         run: |
#           ssh -i ~/.ssh/id_rsa ${{ secrets.VPS_USER }}@${{ secrets.VPS_HOST }} \
#             "${{ github.event.inputs.command }}"

#       - name: Cleanup SSH key
#         if: always()
#         run: rm -f ~/.ssh/id_rsa
